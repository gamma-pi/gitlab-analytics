
        <!DOCTYPE html>
        <html>
        <head>
            <title>Production Repository Health Dashboard</title>
            <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
            <style>
                body { font-family: Arial, sans-serif; margin: 0; padding: 20px; background-color: #f5f5f5; }
                .header { background-color: #3498db; color: white; padding: 20px; text-align: center; border-radius: 5px; margin-bottom: 20px; }
                .dashboard { display: grid; grid-template-columns: repeat(2, 1fr); gap: 20px; }
                .chart { border: 1px solid #ddd; padding: 15px; border-radius: 5px; background: #fff; box-shadow: 0 2px 4px rgba(0,0,0,0.1); }
                .full-width { grid-column: 1 / -1; }
            </style>
        </head>
        <body>
            <div class="header">
                <h1>Production Repository Health Dashboard</h1>
                <p>Generated on 2025-08-28 16:33:18</p>
            </div>

            <div class="dashboard">
                <div id="healthByDomain" class="chart"></div>
                <div id="successRateByDomain" class="chart"></div>
                <div id="protectionCoverageByDomain" class="chart"></div>
                <div id="approvalRulesByDomain" class="chart"></div>
                <div id="deploymentCountsByDomain" class="chart full-width"></div>
                <div id="patternComparison" class="chart full-width"></div>
                <div id="boxPlotDeployments" class="chart full-width"></div>
            </div>

            <script>
                // Data from Python
                var healthScores = {"Deliver": 35.11, "Engineering_and_Design": 25.71, "Make": 22.0, "Plan": 26.67, "Source": 27.14, "e2e_Supply_Chain": 20.0};
                var successRates = {"Deliver": 37.78, "Engineering_and_Design": 14.29, "Make": 5.0, "Plan": 16.67, "Source": 17.86, "e2e_Supply_Chain": 0.0};
                var protectionCoverage = {"Deliver": 100.0, "Engineering_and_Design": 100.0, "Make": 87.5, "Plan": 100.0, "Source": 100.0, "e2e_Supply_Chain": 100.0};
                var approvalAdoption = {"Deliver": 0.0, "Engineering_and_Design": 0.0, "Make": 0.0, "Plan": 0.0, "Source": 0.0, "e2e_Supply_Chain": 0.0};
                var deploymentData = {"Engineering_and_Design": {"success": 1, "failed": 0}, "Plan": {"success": 2, "failed": 0}, "e2e_Supply_Chain": {"success": 0, "failed": 0}, "Source": {"success": 7, "failed": 0}, "Deliver": {"success": 8, "failed": 1}, "Make": {"success": 2, "failed": 1}};
                var boxData = [{"domain": "Engineering_and_Design", "duration": 17.832, "status": "success"}, {"domain": "Engineering_and_Design", "duration": 15.007, "status": "success"}, {"domain": "Engineering_and_Design", "duration": 20.987, "status": "success"}, {"domain": "Deliver", "duration": 17.194, "status": "success"}, {"domain": "Deliver", "duration": 23.758, "status": "success"}, {"domain": "Deliver", "duration": 18.958, "status": "success"}, {"domain": "Deliver", "duration": 17.637, "status": "success"}, {"domain": "Engineering_and_Design", "duration": 16.457, "status": "success"}, {"domain": "Engineering_and_Design", "duration": 23.519, "status": "success"}, {"domain": "Engineering_and_Design", "duration": 17.157, "status": "success"}, {"domain": "Engineering_and_Design", "duration": 21.592, "status": "success"}, {"domain": "Make", "duration": 18.411, "status": "success"}, {"domain": "Make", "duration": 14.556, "status": "success"}, {"domain": "Make", "duration": 17.826, "status": "failed"}, {"domain": "Make", "duration": 19.488, "status": "success"}, {"domain": "Make", "duration": 19.018, "status": "success"}, {"domain": "Make", "duration": 20.111, "status": "success"}, {"domain": "Make", "duration": 14.782, "status": "success"}, {"domain": "Make", "duration": 16.442, "status": "success"}, {"domain": "Make", "duration": 21.44, "status": "success"}, {"domain": "Make", "duration": 22.719, "status": "success"}, {"domain": "Make", "duration": 20.027, "status": "success"}, {"domain": "Make", "duration": 20.861, "status": "success"}, {"domain": "Plan", "duration": 17.055, "status": "success"}, {"domain": "Plan", "duration": 36.811, "status": "success"}, {"domain": "Plan", "duration": 16.87, "status": "success"}, {"domain": "Plan", "duration": 14.528, "status": "success"}, {"domain": "Plan", "duration": 19.354, "status": "success"}, {"domain": "Plan", "duration": 20.142, "status": "success"}, {"domain": "Plan", "duration": 16.797, "status": "success"}, {"domain": "Plan", "duration": 14.732, "status": "success"}, {"domain": "Source", "duration": 22.725, "status": "failed"}, {"domain": "Source", "duration": 73.386, "status": "failed"}, {"domain": "Source", "duration": 17.553, "status": "failed"}, {"domain": "Source", "duration": 17.485, "status": "success"}, {"domain": "Source", "duration": 19.572, "status": "success"}, {"domain": "Source", "duration": 23.085, "status": "success"}, {"domain": "Source", "duration": 20.484, "status": "success"}, {"domain": "Source", "duration": 17.473, "status": "success"}, {"domain": "Source", "duration": 24.174, "status": "success"}, {"domain": "Source", "duration": 23.489, "status": "success"}, {"domain": "Source", "duration": 22.467, "status": "success"}, {"domain": "Source", "duration": 22.968, "status": "failed"}, {"domain": "Source", "duration": 21.405, "status": "success"}, {"domain": "Source", "duration": 49.077, "status": "success"}, {"domain": "Source", "duration": 22.366, "status": "success"}, {"domain": "Source", "duration": 27.739, "status": "success"}, {"domain": "Source", "duration": 81.701, "status": "success"}, {"domain": "Source", "duration": 20.74, "status": "success"}, {"domain": "Source", "duration": 17.687, "status": "success"}, {"domain": "Source", "duration": 34.988, "status": "success"}, {"domain": "Source", "duration": 13.517, "status": "success"}, {"domain": "Source", "duration": 27.779, "status": "success"}, {"domain": "Source", "duration": 28.841, "status": "success"}, {"domain": "Source", "duration": 19.359, "status": "success"}, {"domain": "Source", "duration": 19.121, "status": "success"}, {"domain": "Source", "duration": 25.589, "status": "success"}, {"domain": "Make", "duration": 35.33, "status": "failed"}, {"domain": "Make", "duration": 21.946, "status": "success"}, {"domain": "Make", "duration": 17.852, "status": "success"}, {"domain": "Make", "duration": 21.21, "status": "success"}, {"domain": "Make", "duration": 20.419, "status": "success"}, {"domain": "Make", "duration": 17.171, "status": "success"}, {"domain": "Make", "duration": 16.408, "status": "success"}, {"domain": "Make", "duration": 13.06, "status": "success"}, {"domain": "Make", "duration": 16.465, "status": "success"}, {"domain": "Make", "duration": 29.854, "status": "success"}, {"domain": "Make", "duration": 18.287, "status": "success"}, {"domain": "Make", "duration": 26.43, "status": "success"}, {"domain": "Make", "duration": 20.794, "status": "success"}, {"domain": "Make", "duration": 20.905, "status": "success"}, {"domain": "Make", "duration": 24.406, "status": "success"}, {"domain": "Deliver", "duration": 25.416, "status": "success"}, {"domain": "Deliver", "duration": 16.237, "status": "success"}, {"domain": "Deliver", "duration": 16.419, "status": "success"}, {"domain": "Deliver", "duration": 16.833, "status": "success"}, {"domain": "Deliver", "duration": 18.862, "status": "success"}, {"domain": "Deliver", "duration": 18.005, "status": "success"}, {"domain": "Deliver", "duration": 16.025, "status": "success"}, {"domain": "Deliver", "duration": 22.1, "status": "success"}, {"domain": "Deliver", "duration": 16.35, "status": "success"}, {"domain": "Deliver", "duration": 20.701, "status": "success"}, {"domain": "Deliver", "duration": 18.942, "status": "success"}, {"domain": "Deliver", "duration": 34.643, "status": "success"}, {"domain": "Deliver", "duration": 27.58, "status": "success"}, {"domain": "Deliver", "duration": 29.508, "status": "success"}, {"domain": "Deliver", "duration": 14.482, "status": "success"}, {"domain": "Deliver", "duration": 21.493, "status": "success"}, {"domain": "Deliver", "duration": 20.458, "status": "success"}, {"domain": "Deliver", "duration": 17.69, "status": "success"}, {"domain": "Deliver", "duration": 18.011, "status": "success"}, {"domain": "Deliver", "duration": 18.758, "status": "success"}, {"domain": "Deliver", "duration": 18.35, "status": "success"}, {"domain": "Deliver", "duration": 25.475, "status": "success"}, {"domain": "Deliver", "duration": 16.9, "status": "success"}, {"domain": "Deliver", "duration": 12.58, "status": "success"}, {"domain": "Deliver", "duration": 14.399, "status": "success"}, {"domain": "Deliver", "duration": 36.882, "status": "success"}, {"domain": "Deliver", "duration": 17.358, "status": "success"}, {"domain": "Deliver", "duration": 42.968, "status": "success"}, {"domain": "Deliver", "duration": 26.406, "status": "success"}, {"domain": "Deliver", "duration": 17.911, "status": "success"}, {"domain": "Deliver", "duration": 20.436, "status": "success"}, {"domain": "Deliver", "duration": 18.463, "status": "success"}, {"domain": "Deliver", "duration": 17.19, "status": "success"}, {"domain": "Source", "duration": 14.348, "status": "success"}, {"domain": "Source", "duration": 12.902, "status": "success"}, {"domain": "Source", "duration": 16.056, "status": "success"}, {"domain": "Source", "duration": 19.917, "status": "success"}, {"domain": "Source", "duration": 20.268, "status": "success"}, {"domain": "Source", "duration": 18.095, "status": "success"}, {"domain": "Source", "duration": 59.575, "status": "success"}, {"domain": "Source", "duration": 19.002, "status": "success"}, {"domain": "Source", "duration": 24.682, "status": "success"}, {"domain": "Source", "duration": 18.843, "status": "success"}, {"domain": "Source", "duration": 21.8, "status": "success"}, {"domain": "Source", "duration": 21.702, "status": "success"}, {"domain": "Source", "duration": 17.928, "status": "success"}, {"domain": "Source", "duration": 18.027, "status": "success"}, {"domain": "Source", "duration": 22.48, "status": "success"}, {"domain": "Source", "duration": 17.785, "status": "success"}, {"domain": "Source", "duration": 18.208, "status": "success"}, {"domain": "Source", "duration": 22.954, "status": "success"}];
                var patternData = [];

                // Helper function for bar charts
                function toChartData(dataDict, color = '#3498db') {
                    return {
                        x: Object.keys(dataDict),
                        y: Object.values(dataDict),
                        type: 'bar',
                        marker: { color: color }
                    };
                }

                // Prepare deployment count data
                function prepareDeploymentData() {
                    var domains = Object.keys(deploymentData);
                    var successData = [];
                    var failedData = [];
                    
                    domains.forEach(domain => {
                        successData.push(deploymentData[domain].success || 0);
                        failedData.push(deploymentData[domain].failed || 0);
                    });
                    
                    return [
                        {
                            x: domains,
                            y: successData,
                            name: 'Successful',
                            type: 'bar',
                            marker: { color: '#27ae60' }
                        },
                        {
                            x: domains,
                            y: failedData,
                            name: 'Failed',
                            type: 'bar',
                            marker: { color: '#e74c3c' }
                        }
                    ];
                }

                // Prepare pattern comparison data
                function preparePatternData() {
                    var pattern1Data = [];
                    var pattern3Data = [];
                    var domains = [...new Set(patternData.map(d => d.domain))];
                    
                    // Group data by domain and pattern
                    var groupedData = {};
                    domains.forEach(domain => {
                        groupedData[domain] = {
                            'Pattern 1': patternData.filter(d => d.domain === domain && d.pattern === 'Pattern 1').map(d => d.total),
                            'Pattern 3': patternData.filter(d => d.domain === domain && d.pattern === 'Pattern 3').map(d => d.total)
                        };
                    });
                    
                    // Create traces
                    var traces = [];
                    for (var domain in groupedData) {
                        if (groupedData[domain]['Pattern 1'].length > 0) {
                            traces.push({
                                y: groupedData[domain]['Pattern 1'],
                                x: Array(groupedData[domain]['Pattern 1'].length).fill(domain),
                                name: 'Pattern 1',
                                type: 'box',
                                marker: { color: '#3498db' },  // Blue for Pattern 1 
                                showlegend: traces.length === 0
                            });
                        }
                        
                        if (groupedData[domain]['Pattern 3'].length > 0) {
                            traces.push({
                                y: groupedData[domain]['Pattern 3'],
                                x: Array(groupedData[domain]['Pattern 3'].length).fill(domain),
                                name: 'Pattern 3',
                                type: 'box',
                                marker: { color: '#f39c12' },  // Orange for Pattern 3
                                showlegend: traces.length === 1
                            });
                        }
                    }
                    
                    return traces;
                }

                // Prepare box plot data
                var successData = boxData.filter(d => d.status === "success");
                var failedData = boxData.filter(d => d.status === "failed");
                
                var traceSuccess = {
                    y: successData.map(d => d.duration),
                    x: successData.map(d => d.domain),
                    name: 'Success',
                    type: 'box',
                    marker: { color: '#27ae60' }
                };

                var traceFailed = {
                    y: failedData.map(d => d.duration),
                    x: failedData.map(d => d.domain),
                    name: 'Failed',
                    type: 'box',
                    marker: { color: '#e74c3c' }
                };

                // Create all plots
                Plotly.newPlot('healthByDomain', [toChartData(healthScores, '#2ecc71')], {
                    title: 'Average Health Score by Domain',
                    yaxis: { title: 'Score (0-100)', range: [0, 100] },
                    xaxis: { title: 'Domain' }
                });

                Plotly.newPlot('successRateByDomain', [toChartData(successRates, '#3498db')], {
                    title: 'Pipeline Success Rate by Domain',
                    yaxis: { title: 'Success Rate (%)', range: [0, 100] },
                    xaxis: { title: 'Domain' }
                });

                Plotly.newPlot('protectionCoverageByDomain', [toChartData(protectionCoverage, '#f39c12')], {
                    title: 'Branch Protection Coverage by Domain',
                    yaxis: { title: 'Coverage (%)', range: [0, 100] },
                    xaxis: { title: 'Domain' }
                });

                Plotly.newPlot('approvalRulesByDomain', [toChartData(approvalAdoption, '#9b59b6')], {
                    title: 'Approval Rule Adoption by Domain',
                    yaxis: { title: 'Adoption Rate (%)', range: [0, 100] },
                    xaxis: { title: 'Domain' }
                });

                Plotly.newPlot('deploymentCountsByDomain', prepareDeploymentData(), {
                    title: 'Deployment Counts by Domain (Last 30 Days)',
                    yaxis: { title: 'Number of Deployments' },
                    xaxis: { title: 'Domain' },
                    barmode: 'stack'
                });

                // Create pattern comparison plot if data exists
                if (patternData && patternData.length > 0) {
                    Plotly.newPlot('patternComparison', preparePatternData(), {
                        title: 'Deployment Count Comparison: Pattern 1 vs Pattern 3',
                        yaxis: { title: 'Number of Deployments' },
                        xaxis: { title: 'Domain' },
                        boxmode: 'group'
                    });
                } else {
                    document.getElementById('patternComparison').innerHTML = 
                        '<p style="text-align: center; padding: 50px;">No pattern comparison data available</p>';
                }

                // Only create box plot if we have data
                if (boxData.length > 0) {
                    Plotly.newPlot('boxPlotDeployments', [traceSuccess, traceFailed], {
                        title: 'Job Duration Distribution by Domain and Status',
                        yaxis: { title: 'Duration (seconds)' },
                        xaxis: { title: 'Domain' },
                        boxmode: 'group'
                    });
                } else {
                    document.getElementById('boxPlotDeployments').innerHTML = 
                        '<p style="text-align: center; padding: 50px;">No duration data available for box plot</p>';
                }
            </script>
        </body>
        </html>
        